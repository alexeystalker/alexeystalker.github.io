---
share: true
tags: 
 - microservice/domain-model
 - DDD/aggregate
---
# Проектирование доменной модели с помощью шаблона “Агрегат” из DDD
В традиционном ООП [[../../Andrew Lock - ASP.NET Core in Action/definitions/domain-model|доменная модель]] описывает набор классов и отношения между ними, например 
![[../../../images/Pasted image 20210923193554.png|Pasted image 20210923193554.png]]
Этот пример содержит несколько классов, соотносящихся с бизнес-объектами: `Consumer`, `Order`, `Restaurant` и `Courier`. Как видно, в модели не хватает чётких границ между разными бизнес-объектами. Например, не видно, какие классы входят в бизнес-объект `Order`.
Расплывчатые границы могут привести к проблемам.
Например, мы хотим выполнить с объектом `Order` операцию, такую как загрузка или удаление. Что именно это означает? Какова область применения этой операции? Какие классы должны быть затронуты? Модель не определяет этого.
Также отсутстствие чётких границ может вызвать проблемы при обновлении бизнес-объекта. Типичный бизнес-объект имеет *инварианты* — правила, которые должны соблюдаться. При этом соблюдение инвариантов может сильно усложнить бизнес-логику, чтобы обновление частей бизнес-объекта не нарушило инварианты.  [[../../../Design Patterns/Microservice Architecture Patterns/Data Management Patterns/aggregate-pattern|Агрегаты]] из DDD призваны решить эти проблемы.
