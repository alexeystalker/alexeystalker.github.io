---
share: true
tags:
 - NET/ASPNETCore/publish
---
# Настройка URL-адресов приложения
Если мы не [[ch-16-configuring-iis-for-asp-net-core|используем IIS]] в качестве [[reverse-proxy|обратного прокси]], то, возможно, нужно настроить URL-адреса, которые будет слушать приложение.

По умолчанию ASP.NET Core слушает запросы по адресу `http://localhost:5000`.  Есть много способов задать адрес прослушивания, но здесь мы опишем только два[^1]: с помощью переменных окружения и с помощью аргументов командной строки.

Ранее мы разбирали конфигурацию в ASP.NET Core, и, в частности, [[ch-11-setting-the-hosting-environment|концепцию окружения размещения]]. Окружение можно задать, установив переменную `ASPNETCORE_ENVIRONMENT`. Аналогичным образом можно задать URL-адрес для приложения, установив переменную `ASPNETCORE_URLS`. Например, в Windows можно задать переменную из командной оболочки:
```bash
set ASPNETCORE_URLS=http://localhost:8000
```
Можно задать несколько адресов, разделив их точкой с запятой:
```bash
set ASPNETCORE_URLS=http://localhost:5001;http://*:5002
```
При этом ASP.NET Core будет слушать два адреса:
- `http://localhost:5001` - только на локальной машине;
- `http://*:5002` - любой адрес с портом 5002

При этом другой адрес (кроме localhost) указывать нельзя.

> [!tip] Подсказка
> Если `ASPNETCORE_URLS` не работает, убедитесь, что в каталоге с приложением нет файла launchSettings.json, так как значения в этом файле имеют приоритет

Задание адресов для прослушивания с помощью переменной окружения хорошо подходит, когда запускается одно приложение, или используются контейнеры Docker[^2].
Если запускается несколько приложений на одной машине, то такой способ не подходит.
Можно, также как окружение, задать адреса при помощи параметра командной строки:
```bash
dotnet RecipeApplication.dll --urls "http://*:8081"
```

> [!warning] Внимание
> Если приложение ASP.NET Core запускается БЕЗ обратного прокси-сервера, по соображениям безопасности необходимо использовать *фильтрацию хостов*. Автор рассказывает об этом в [своём блоге](https://andrewlock.net/adding-host-filtering-to-kestrel-in-aspnetcore/)

[^1]: другие способы разбираются в [блоге автора](https://andrewlock.net/5-ways-to-set-the-urls-for-an-aspnetcore-app/)
[^2]: о том, как размещать приложения с помощью Docker, можно посмотреть [здесь](https://docs.microsoft.com/ru-ru/aspnet/core/host-and-deploy/docker/?view=aspnetcore-6.0)