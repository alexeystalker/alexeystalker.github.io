---
share: true
tags:
 - NET/ASPNETCore/HTTPS
 - HTTPS
---
# Настройка Kestrel для использования сертификатов HTTPS в промышленном окружении
Создание сертификата TLS для промышленного окружения - отдельный трудоёмкий процесс. Предположим, мы справились с этой задачей.
Получив сертификат, необходимо настроить Kestrel, чтобы использовать его для обслуживания HTTPS-трафика. [[ch-16-configuring-urls-for-an-app|Как мы видели]], с помощью переменной окружения `ASPNETCORE_URLS` или через командную строку можно предоставить URL-адрес с префиксом https. По умолчанию Kestrel использует сертификат разработки, однако в промышленном окружении нужно указать, какой сертификат использовать.

Это можно сделать несколькими способами[^1]. Рассмотрим пример одного из возможных способов установки сертификата HTTPS в промышленном окружении:
```json
{
	"Kestrel": {
		"Certificates": {
			"Default": {
				"Path": "localhost.pfx",
				"Password": "testpassword"
			}
		}
	}
}
```
> [!warning] Предупреждение
> В предыдущем примере мы зашили имя и пароль сертификата в appsettings.json для простоты. Однако, **никогда** нельзя помещать рабочие пароли в appsettings.json. Можно хранить их в [[ch-11-storing-config-secrets-safely|хранилище секретов]], или загрузить сертификат из локального хранилища машины.

[^1]: полная информация в [документации](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-6.0#endpoint-configuration)

