---
share: true
tags:
 - NET/ASPNETCore/filters
 - NET/Razor
---
# Конвейер фильтров Razor Pages
Razor Pages использует ту же базовую архитектуру, что и  контроллеры API, поэтому его конвейер фильтров практически идентичен. Схему см. на рисунке:
![[Pasted image 20220503201839.png]]
Единственным отличием является то, что используются *фильтры страниц* вместо [[ch-13-mvc-filter-pipeline|фильтров действий]].
Фильтры страниц запускаются трижды:
- *после выбора обработчика страницы* - обрабочик страницы [[ch-5-selecting-page-handler|выбирается]] после выполнения фильтров ресурсов, после чего фильтры страниц выполняются в первый раз, до [[model-binding|привязки модели]];
- *после привязки модели* - здесь можно манипулировать данными, привязанными к модели, или полностью прервать выполнение обработчика страницы и вернуть `IActionResult`;
- *после выполнения обработчика страницы* - здесь можно настроить `IActionResult`, возвращаемый обработчиком страницы перед выполнением результата.

При каждом выполнении фильтра вызывается отдельный метод соответствующего интерфейса, поэтому легко узнасть, в каком месте конвейера мы находимся.