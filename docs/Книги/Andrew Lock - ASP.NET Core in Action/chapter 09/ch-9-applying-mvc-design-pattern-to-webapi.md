---
share: true
tags:
 - NET/MVC
 - API
---
# Применение паттерна проектирования MVC к веб-API
В ASP.NET Core, в отличие от предыдущих версий, существует *единый* фреймворк, который можно использовать  для создания как традиционных веб-приложений, так и веб-API. Поэтому схема работы для веб-API [[ch-4-applying-mvc-to-razor-pages|аналогична схеме работы для Razor Pages]].
![[Pasted image 20220312160408.png]]
Компонент маршрутизации  выбирает конечную точку для вызова на основе входящего URL-адреса, для API это контроллер и [[action-method|действие]]. Далее происходит [[model-binding|привязка модели]], при которой создается и заполняется значениями из запроса [[binding-model|модель привязки]]. При этом веб-API используют [[ch-9-generating-response-from-a-model|форматтеры ввода]], чтобы принимать данные в различных форматах.[^1] Валидация проходит [[ch-6-validating-on-server-for-safety|аналогичным с Razor Pages образом]], свойство `ModelState` в базовом классе `ControllerBase` заполняется ошибками валидации.

[^1]: Можно даже сделать собственный форматтер ввода, см [здесь](https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/custom-formatters?view=aspnetcore-5.0)

Метод действия эквивалентен [[page-handler|обработчику]] Razor Page; он точно также взаимодействует с моделью приложения.
После того, как модель приложения вернет необходимые данные, метод действия создает *модель API*. Это аналог `PageModel`, но в ней нет данных, используемых для генерации HTML-кода. Далее модель API передается *форматтеру вывода*, который сериализует модель API. Именно форматтер вывода формирует букву “V” в веб-API версии [[mvc-pattern|MVC]].

