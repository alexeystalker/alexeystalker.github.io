---
share: true
title: Аутентификация для API и распределенных приложений
tags:
 - NET/ASPNETCore
 - NET/authentication
 - security
---
# Аутентификация для API и распределенных приложений[^1]
ASP.NET Core часто используется для создания WebAPI для мобильных или браузерных одностраничных приложений, а также (при использовании микросервисной архитектуры) и отдельных сервисов.
В этом случае подход, [[./ch-14-authentication-services-middleware|описанный]] в предыдущем разделе, неприменим.
Чтобы решить эту проблему, аутентифицирующий код помещают в *поставщика идентификационной информации*.
![[../../../images/Pasted image 20220604123117.png|Pasted image 20220604123117.png]]
В этом случае пользователь выполняет вход в учётную запись этого поставщика, а поставщик передает клиенту токены, которые в свою очередь передаются при запросе, предоставляя информацию о пользователе в WebAPI.
Преимущества этого подхода:
- *пользователи могут совместно использовать свою личность в нескольких сервисах*;
- *уменьшение дублирования кода*;
- *лёгкость добаавления новых поставщиков*.

ASP.NET Core поддерживает такие архитектуры и потребление выпущенных токенов носителя, однако не включает в себя поддержку выпуска токенов. Нужно использовать стороннюю библиотеку или поставщика.
Один из вариантов — использовать сторонние сервисы, такие как [Okta](https://www.okta.com/), [Auth0](https://auth0.com/) или [Azure Active Directory B2C](https://docs.microsoft.com/ru-ru/azure/active-directory-b2c/overview).
Еще вариант — создать собственного поставщика, например, с помощью библиотек [OpenIddict](https://github.com/openiddict) или [IdentityServer](https://identityserver4.readthedocs.io/en/latest/)[^2]

[^1]:См. также [[../../Chris Richardson - Microservices Patterns/chapter 11/ch-11-security-in-microservices|главку о безопасности в микросервисах]] в книге Криса Ричардсона
[^2]:Подробнее о том, с чего начать, см. [тут](https://docs.microsoft.com/ru-ru/aspnet/core/security/authentication/identity-api-authorization?view=aspnetcore-6.0)