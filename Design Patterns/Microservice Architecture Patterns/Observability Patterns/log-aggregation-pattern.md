---
share: true
tags:
 - microservice/pattern
 - microservice/observability
---
# Шаблон "Агрегация журналов"
Агрегирует журналы всех сервисов в центральной базе данных с поддержкой поиска и уведомлений.
![[Pasted image 20211102212457.png]]
Как только сервер сохранит изменения в логах сервисов, их можно просматривать и анализировать, осуществлять по ним поиск и генерировать уведомления.
## Как сервис генерирует журнал
В большинстве языков программирования есть одна или несколько библиотек для ведения журналов, облегчающих генерацию правильно структурированных записей. Можно воспользоваться одной из них, или написать собственный API как обертку выбранной библиотеки.
Также важно определиться, куда записывать журнал. Традиционно используются журнальные файлы. Однако, в случае использования современных технологий развертывания, этот вариант может оказаться недоступным, и нужно будет писать в `stdout`.
## Инфраструктура агрегации журналов
Инфраструктура ведения журналов отвечает за их агрегацию, хранение и функцию поиска. Популярным решением является стек ELK (*Elasticsearch, Logstash, Kibana*), однако есть и другие решения, например Fluentd и Apache Flume.
## Ссылки
https://microservices.io/patterns/observability/application-logging.html