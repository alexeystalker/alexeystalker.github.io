---
share: true
tags:
 - event-sourcing
 - DDD/aggregate
---
# Сохранение агрегатов с помощью порождения событий
При порождении событий агрегат сохраняется в *хранилище событий* в виде последовательности событий.
Вот пример агрегата `Order`: порождение событий поещает каждый агрегат `Order` в таблицу `EVENTS`, используя одну или несколько строк. Каждая строка - это доменное событие.
![[Pasted image 20210927192345.png]]
Создавая или обновляя агрегат, приложение вставляет в таблицу `EVENTS` событие, которое тот сгенерировал. Приложение загружает агрегат из хранилища, воспроизводя события, а именно:
1. Загружает события агрегата
2. Создаёт экземпляр агрегата конструктором по умолчанию
3. Применяет по очереди загруженные события на агрегат