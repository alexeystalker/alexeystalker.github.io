---
share: true
tags: [microservice]
---
# Аутентификация и авторизация
Еще одна проблема, которую нужно решить при переводе монолитного приложения на микросервисы - адаптация существующего механизма безопасности. [[ch-11-security-in-microservices|Реализация]] безопасности для микросервисов основывается на токенах типа [[json-web-token|JWT]]. Это довольно сильно отличается от монолитного подхода, предусматривающего хранение сеанса в памяти. Трудность состоит в том, что необходимо одновременно поддерживать оба механизма.
Существует простой способ решения этой проблемы.
![[Pasted image 20211107201055.png]]
Обработчик входа в систему возвращает дополнительный cookie (в примере `USERINFO`). Он содержит информацию о пользователе, такую как его ID и роли. Браузер включает этот cookie в каждый запрос. [[api-gateway-pattern|API-шлюз]] извлекает содержимое cookie и добавляет его в HTTP-запрос к сервису.
