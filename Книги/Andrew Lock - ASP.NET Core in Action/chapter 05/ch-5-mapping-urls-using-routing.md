---
share: true
tags:
 - NET/ASPNETCore/routing
 - NET/Razor
---
# Сопоставление URL-адресов с Razor Pages с использованием маршрутизации
#### Что такое маршрутизация?
Как мы видели в [[ch-3-middleware-pipeline|главе 3]], приложение ASP.NET Core содержит конвейер промежуточного ПО, определяющий поведение приложения. Финальную обработку запроса выполняет компонент `EndpointMiddleware` в [[ch-4-creating-a-website|конце конвейера]], вызывая [[page-handler|обработчик страницы в Razor]] или [[action-method|метод действия]] в контроллере MVC.
Однако, за сопоставление запроса и конкретного обработчика или метода отвечает процесс, называемый [[routing|маршрутизацией]].
К примеру, в случае простого пути адреса, например, `/Index`, именно компонент маршрутизации определяет, что этому пути соответствует обработчик страницы в файле `Index.cshtml`.
Предположим, у нас есть интернет-магазин. Каждый товар в нем должен иметь отдельный адрес, и, если бы маршрутизации не существовало, мы могли бы использовать только два подхода:
- *использовать разные страницы Razor для каждого товара* — невозможно для реального ассортимента
- *использовать одну страницу Razor и [[url-query-string|строку запроса]]*, что приведет к уродливым адресам типа `/product?name=big-widget` или `/product?id=12`.

Благодаря маршрутизации можно иметь *одну* страницу Razor для обработки *нескольких* URL-адресов.
#### [[ch-5-routing-in-asp-net-core|Маршрутизация в ASP.NET Core]]
#### [[ch-5-customizing-route-templates|Настройка шаблонов маршрутов для страницы Razor]]
#### [[ch-5-route-template-syntax|Изучение синтаксиса шаблона маршрута]]
#### [[ch-5-generating-urls-from-route-parameters|Генерация URL-адресов из параметров маршрута]]
#### [[ch-5-selecting-page-handler|Выбор обработчика страницы для вызова]]
#### [[ch-5-customizing-conventions-with-razor-pages|Настройка соглашений с помощью Razor Pages]]

#### Советы автора о маршрутизации и ее настройке
- *Избегайте* замены шаблона маршрута на абослютный путь в директиве `@page`;
- *избегайте* добавления литеральных сегментов в директиву `@page`, используйте файловую иерархию;
- *избегайте* добавления дополнительных шаблонов маршрутов через `AddPageRoute()`. Наличие нескольких способов доступа сбивает с толку;
- *добавьте* параметры маршрута в директиву `@page`, чтобы сделать маршруты динамическими;
- *рассмотрите* возможность использования глобальных соглашений для изменения шаблонов маршрутов всех страниц.

> [!Attention] Внимание!
> Если случайно создать две страницы Razor с шаблонами маршрутов, перекрывающими друг друга - это приведет к ошибке времени выполнения.
