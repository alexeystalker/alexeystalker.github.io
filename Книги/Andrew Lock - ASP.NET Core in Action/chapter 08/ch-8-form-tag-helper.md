---
share: true
tags:
 - NET/Razor/tag-helper
---
# Тег-хелпер формы
Для создания HTML-формы нужен элемент `<form>`.  Дополним его атрибутом `asp-page`:
```razor
<form asp-page="Checkout">
```
Тем самым в конечный HTML-код добавятся атрибуты `action` и `method`:
```html
<form action="/Checkout" method="post">
```
установка атрибута `asp-page` позволяет указать другую страницу Razor, на которую будет отправляться содержимое формы. По умолчанию для обработки формы используется та же страница, что и для отображения. Однако важно помнить, что, если убрать атрибут `asp-page`, то необходимо добавить атрибут `method` самостоятельно, иначе (по умолчанию) будет использоваться метод GET, что чревато угрозой безопасности.
Атрибут `asp-page` добавляется с помощью `FormTagHelper`, который использует использует предоставленное значение, чтобы создать URL-адрес для атрибута `action` с использованием [[ch-5-generating-urls-from-route-parameters|функции маршрутизации]].
Предположим, у нас есть страница Product.cshtml, использующая директиву `@page {id}`, при которой полный шаблон маршрута будет `"Product/{id}"`. Чтобы указать значение `{id}`, необходимо использовать атрибут `asp-route-*`, где вместо звёздочки подставить имя параметра, в данном случае `asp-route-id`. Например, мы хотим передать значение 5:
```html
<form asp-page="Product" asp-route-id="5">
```
что создаст разметку
```html
<form action="/Product/5" method="post">
```
При этом можно использовать столько атрибутов `asp-route-*`, сколько нужно, чтобы сгенерировать правильный адрес для атрибута action. Также можно использовать атрибут `asp-page-handler` для указания конкретного [[page-handler|обработчика страницы]].
В тег-хелперах, как в других конструкциях Razor, можно использовать значения C#:
```html
<form asp-page="Product" asp-route-id="@Model.ProductId">
```
Помимо основной задачи — создания атрибута `action`, тег-хелпер формы создает скрытое поле `<input>` для предотвращения [[csrf-attack|межсайтовой подделки запросов]][^1]. Это поведение можно отключить, добавив атрибут `asp-antiforgery="false"`.

[^1]: [[ch-18-protecting-from-csrf-attacks|Подробнее]]